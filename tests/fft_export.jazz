require "../src/fft.jazz"
require "../src/montgomery.jazz"

export
fn montgomery_REDC_jazz(reg u64 x) -> reg u32
{
	stack u32 redc_x;
	reg u32 result;
	redc_x = montgomery_REDC(x);
	result = redc_x;
	return result;
}

export
fn fft_jazz(reg u64 vec)
{	
	stack u32[Li2_polydeg] f;
	reg u32 term;

	inline int i;

	for i = 0 to Li2_polydeg {
		term = (u32) [vec + 4 * i];
		f[i] = term;
	}

	f = fft(f);
	
	for i = 0 to Li2_polydeg {
		f[i] = term;
		term = (u32) [vec + 4 * i];
	}
}

export
fn ifft_jazz(reg u64 vec)
{
	stack u32[Li2_polydeg] f;
	reg u32 term;

	inline int i;

	for i = 0 to Li2_polydeg {
		term = (u32) [vec + 4 * i];
		f[i] = term;
	}

	f = ifft(f);
	
	for i = 0 to Li2_polydeg {
		f[i] = term;
		term = (u32) [vec + 4 * i];
	}
}

/*
export
fn fft_poly_mult_jazz(reg u64 ptr_fft_f ptr_fft_g ptr_fft_prod)
{
	stack u32[Li2_polydeg] 
//fn poly_mult(reg ptr u32[Li2_polydeg] fft_f fft_g fft_prod)
	

}

*/
